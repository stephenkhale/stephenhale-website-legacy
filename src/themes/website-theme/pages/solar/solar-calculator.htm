title = "Solar Calculator"
url = "/solar/calculator"
layout = "Empty"
is_hidden = 0
==
<header class="container" style="margin: 1rem auto;">
    <h1 class="is-size-1">Solar Calculator</h1>
</header>

<section id="calculator" class="container">
    <solar-calculator></solar-calculator>
</section>

<template id="solar-calculator-template">
{% verbatim %}
    <div>
        <div class="level">
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Kilowatts</p>
                    <p class="title">{{ totalKilowatts.toFixed(2) }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Annual Kilowatts</p>
                    <p class="title">{{ totalAnnualKilowatts.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Annual Savings</p>
                    <p class="title">${{ annualSavings.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Monthly Savings</p>
                    <p class="title">${{ monthlySavings.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Remaining Monthly Bill</p>
                    <p class="title">${{ remainingMonthlyBill.toFixed(2) | format-number }}</p>
                </div>
            </div>
        </div>
        <div class="level">
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Cost</p>
                    <p class="title">${{ totalCost.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Tax Credit</p>
                    <p class="title">${{ totalTaxCredit.toFixed(2) | format-number }} ({{ taxCreditPercentage }}%)</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Remaining Cost</p>
                    <p class="title">${{ totalCostAfterTaxCredit.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Savings</p>
                    <p :class="['title', totalSavings >= 0 ? 'has-text-success' : 'has-text-danger' ]">${{ totalSavings.toFixed(2) | format-number }}</p>
                </div>
            </div>
        </div>
        <div class="level">
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Loan Cost</p>
                    <p class="title">${{ loan.totalRepayment.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Total Loan Interest</p>
                    <p class="title">${{ loan.interestPaid.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Monthly Loan Payment</p>
                    <p class="title">${{ loan.monthlyPayment.toFixed(2) | format-number }}</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Actual Monthly Cost</p>
                    <p class="title">${{ actualMonthlyCost.toFixed(2) | format-number }}</p>
                </div>
            </div>
        </div>

        <fieldset>
            <div class="columns">
                <div class="column">
                    <div class="box">
                        <h2 class="title is-4">Panels</h2>

                        <div class="field">
                            <label class="label">Watts Per Panel</label>
                            <div class="control">
                                <input v-model="wattsPerPanel" type="number" class="input" placeholder="325">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Total Panels</label>
                            <div class="control">
                                <input v-model="totalPanels" type="number" class="input" placeholder="25">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Annual Output Per Kilowatt</label>
                            <div class="control">
                                <input v-model="annualOutputPerKilowatt" type="number" class="input" placeholder="1700">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="box">
                        <h2 class="title is-4">Unit Price</h2>

                        <div class="field">
                            <label class="label">Price Per Watt</label>
                            <div class="control">
                                <input v-model="pricePerWatt" type="number" class="input" min="0.01" step="0.01" placeholder="2.74">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Cost Per Kilowatt (from Electricity Provider)</label>
                            <div class="control">
                                <input v-model="costPerKilowatt" type="number" class="input" min="0.01" step="0.01" placeholder="0.13">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Average Monthly Bill</label>
                            <div class="control">
                                <input v-model="averageMonthlyBill" type="number" class="input" min="0.01" step="0.01" placeholder="250.00">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="box">
                        <h2 class="title is-4">Loan</h2>

                        <div class="field">
                            <label class="label">Annual Percentage Rate</label>
                            <div class="control">
                                <input v-model="annualPercentageRate" type="number" class="input" min="0.01" step="0.01" placeholder="2.99">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Loan Term (Years)</label>
                            <div class="control">
                                <input v-model="loanTerm" type="number" class="input" placeholder="10">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Loan Percentage (of total cost)</label>
                            <div class="control">
                                <input v-model="loanPercentage" type="number" class="input" min="1" max="100" step="1" placeholder="70">
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Tax Credit Percentage</label>
                            <div class="control">
                                <input v-model="taxCreditPercentage" type="number" class="input" min="1" max="100" step="1" placeholder="30">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>
{% endverbatim %}
</template>

{% put scripts %}
    <script id="calculator-template" type="text/x-template">

    </script>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <script src="{{ 'assets/js/solar/calculator.js'|theme }}"></script>
{% endput %}

{% put styles %}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css"/>
{% endput %}