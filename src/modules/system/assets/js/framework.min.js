/*! For license information please see framework.min.js.LICENSE.txt */
(()=>{var e={145(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}window.oc=window.jax,window.oc.serializeJSON=window.oc.values,function(){var t,r,n,o,i=window.jQuery;void 0!==i&&(t=i.fn.request,i.fn.request=function(t,r){var n="object"===e(r)?r:{};return oc.request(this.get(0),t,n)},i.fn.request.Constructor=oc.request,i.request=function(e,t){return i(document).request(e,t)},i.fn.request.noConflict=function(){return i.fn.request=t,this},i.fn.render=function(e){i(document).on("render",e)},a(document,"ajax:setup","ajaxSetup",["context"]),a(document,"ajax:promise","ajaxPromise",["context"]),a(document,"ajax:fail","ajaxFail",["context","data","responseCode","xhr"]),a(document,"ajax:done","ajaxDone",["context","data","responseCode","xhr"]),a(document,"ajax:always","ajaxAlways",["context","data","responseCode","xhr"]),a(document,"ajax:before-redirect","ajaxRedirect"),a(document,"ajax:update","ajaxUpdate",["context","data","responseCode","xhr"]),a(document,"ajax:before-replace","ajaxBeforeReplace"),a(document,"ajax:before-request","oc.beforeRequest",["context"]),a(document,"ajax:before-update","ajaxBeforeUpdate",["context","data","responseCode","xhr"]),a(document,"ajax:request-success","ajaxSuccess",["context","data","responseCode","xhr"]),a(document,"ajax:request-complete","ajaxComplete",["context","data","responseCode","xhr"]),a(document,"ajax:request-error","ajaxError",["context","message","responseCode","xhr"]),a(document,"ajax:before-validate","ajaxValidation",["context","message","fields"]),a(window,"ajax:before-send","ajaxBeforeSend",["context"]),a(window,"ajax:update-complete","ajaxUpdateComplete",["context","data","responseCode","xhr"]),a(window,"ajax:invalid-field","ajaxInvalidField",["element","fieldName","errorMsg","isFirst"]),a(window,"ajax:confirm-message","ajaxConfirmMessage",["message","promise"]),a(window,"ajax:error-message","ajaxErrorMessage",["message"]),r=document,n="ajax:setup",o="a[data-request], button[data-request], form[data-request], a[data-handler], button[data-handler]",i(r).on(n,o,function(t){var r=i(this).data("request-data");if(r){var n=t.detail.context.options;r.constructor==={}.constructor?Object.assign(n.data,r):"string"==typeof r&&Object.assign(n.data,function(t,r){if(void 0===r&&(r=""),"object"===e(r))return r;"{"!==r.charAt(0)&&(r="{"+r+"}");try{return oc.parseJSON(r)}catch(e){throw new Error("Error parsing the "+t+" attribute value. "+e)}}("request-data",r))}}),function(){void 0===i.oc&&(i.oc={});i.oc.flashMsg=window.jax.flashMsg,i.oc.stripeLoadIndicator=window.jax.progressBar}());function a(e,t,r,n){n=n||[],i(e).on(t,function(e){!function(e,t,r){r=r||[];var n=i.Event(t),o=function(e,t){var r=[];return t.forEach(function(t){r.push(e.detail[t])}),r}(e,r);i(e.target).trigger(n,o),n.isDefaultPrevented()&&e.preventDefault()}(e.originalEvent,r,n)})}}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(()=>{"use strict";function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.target,n=void 0===r?document:r,o=t.detail,i=void 0===o?{}:o,a=t.bubbles,s=void 0===a||a,u=t.cancelable,l=new CustomEvent(e,{detail:i,bubbles:s,cancelable:void 0===u||u});return n.dispatchEvent(l),l}function t(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o,i=(o=function(e,t){return e.reduce(function(e,r,n){return e+r+(null==t[n]?"":t[n])},"")}(e,r),o.replace(/^\n/,"")).split("\n"),a=i[0].match(/^\s+/),s=a?a[0].length:0;return i.map(function(e){return e.slice(s)}).join("\n")}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw i}}}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var c=/[^.]*(?=\..*)\.|.*/,f=/\..*/,h=/::\d+$/,d={},p=1,y={mouseenter:"mouseover",mouseleave:"mouseout"},v=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),m=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"on",value:function(e,t,r,n,o){j(e,t,r,n,o,!1)}},{key:"one",value:function(e,t,r,n,o){j(e,t,r,n,o,!0)}},{key:"off",value:function(e,t,r,n,o){if("string"==typeof t&&e){var a=i(k(t,r,n,o),4),s=a[0],u=a[1],l=a[2],c=a[3],f=l!==t,d=b(e),p=d[l]||{},y=t.startsWith(".");if(void 0===u){if(y)for(var v=0,m=Object.keys(d);v<m.length;v++)A(e,d,m[v],t.slice(1));for(var g=0,w=Object.keys(p);g<w.length;g++){var j=w[g],E=j.replace(h,"");if(!f||t.includes(E)){var x=p[j];S(e,d,l,x.callable,x.delegationSelector,c)}}}else{if(!p)return;S(e,d,l,u,s?r:null,c)}}}},{key:"dispatch",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.target,o=void 0===n?document:n,i=r.detail,a=void 0===i?{}:i,s=r.bubbles,u=void 0===s||s,l=r.cancelable;return e(t,{target:o,detail:a,bubbles:u,cancelable:void 0===l||l})}},{key:"trigger",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.detail,i=void 0===o?{}:o,a=n.bubbles,s=void 0===a||a,u=n.cancelable;return e(r,{target:t,detail:i,bubbles:s,cancelable:void 0===u||u})}}],(r=null)&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function g(e,t){return t&&"".concat(t,"::").concat(p++)||e.uidEvent||p++}function b(e){var t=g(e);return e.uidEvent=t,d[t]=d[t]||{},d[t]}function w(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find(function(e){return e.callable===t&&e.delegationSelector===r})}function k(e,t,r,n){var o,i="string"==typeof t,a=i?r:t,s=i?n:r,u=(o=(o=e).replace(f,""),y[o]||o);return v.has(u)||(u=e),[i,a,u,s]}function j(e,t,r,n,a,s){if("string"==typeof t&&e){var u=i(k(t,r,n,a),4),l=u[0],f=u[1],h=u[2],d=u[3];if(t in y){f=function(e){return function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}}(f)}var p=b(e),v=p[h]||(p[h]={}),j=w(v,f,l?r:null);if(j)j.oneOff=j.oneOff&&s;else{var S=g(f,t.replace(c,"")),A=l?function(e,t,r){return function n(i){for(var a=e.querySelectorAll(t),s=i.target;s&&s!==this;s=s.parentNode){var u,l=o(a);try{for(l.s();!(u=l.n()).done;){if(u.value===s)return i.delegateTarget=s,n.oneOff&&m.off(e,i.type,t,r),r.apply(s,[i])}}catch(e){l.e(e)}finally{l.f()}}}}(e,r,f):function(e,t){return function r(n){return n.delegateTarget=e,r.oneOff&&m.off(e,n.type,t),t.apply(e,[n])}}(e,f);A.delegationSelector=l?r:null,A.callable=f,A.oneOff=s,A.uidEvent=S,v[S]=A,e.addEventListener(h,A,d)}}}function S(e,t,r,n,o,i){var a=w(t[r],n,o);a&&(e.removeEventListener(r,a,i),delete t[r][a.uidEvent])}function A(e,t,r,n){for(var o=t[r]||{},i=0,a=Object.keys(o);i<a.length;i++){var s=a[i];if(s.includes(n)){var u=o[s];S(e,t,r,u.callable,u.delegationSelector)}}}var E=["__ajax"];function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return T(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q(n.key),n)}}function q(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}var C=function(){return e=function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r.__ajax,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,E);this.ok=!!o.ok,this.severity=o.severity||"info",this.message=null!==(t=o.message)&&void 0!==t?t:null,this.data=i||{},this.invalid=o.invalid||{},this.ops=Array.isArray(o.ops)?o.ops:[],this.redirect=null,this.status=n},(t=[{key:"isFatal",value:function(){return"fatal"===this.severity||this.status>=500&&this.status<=599}},{key:"isError",value:function(){return"error"===this.severity||this.isFatal()||!1===this.ok}},{key:"getMessage",value:function(){return this.message}},{key:"getInvalid",value:function(){return this.invalid||{}}},{key:"getData",value:function(){return this.data||{}}},{key:"getStatus",value:function(){return this.status}},{key:"getSeverity",value:function(){return this.severity}},{key:"getOps",value:function(e){return e?this.ops.filter(function(t){return(null==t?void 0:t.op)===e}):this.ops}},{key:"getFlash",value:function(){return this.getOps("flash").map(function(e){var t=e.level,r=void 0===t?"info":t,n=e.text;return{level:r,text:void 0===n?"":n}})}},{key:"getBrowserEvents",value:function(){return this.getOps("dispatch").map(function(e){var t=e.selector;return{selector:void 0===t?null:t,event:e.event,detail:e.detail,async:e.async}})}},{key:"getDomPatches",value:function(){return this.getOps("patchDom").map(function(e){var t=e.selector,r=e.html,n=void 0===r?"":r,o=e.swap;return{selector:t,html:n,swap:void 0===o?"innerHTML":o}})}},{key:"getPartials",value:function(){return this.getOps("partial").map(function(e){var t=e.name,r=e.html;return{name:t,html:void 0===r?"":r}})}},{key:"getAssets",value:function(){var e,t={js:[],css:[],img:[]},r={js:new Set,css:new Set,img:new Set},n=O(this.getOps("loadAssets"));try{for(n.s();!(e=n.n()).done;){var o=e.value,i=o.type,a=o.assets,s=void 0===a?[]:a;if(t[i]){var u,l=O(s);try{for(l.s();!(u=l.n()).done;){var c=u.value,f="string"==typeof c?c:c.url;r[i].has(f)||(r[i].add(f),t[i].push("string"==typeof c?{url:c}:c))}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"getRedirectUrl",value:function(){var e=this.getOps("redirect")[0];return(null==e?void 0:e.url)||this.redirect||null}},{key:"getReload",value:function(){return this.getOps("reload")[0]||null}}])&&P(e.prototype,t),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}var B=function(){return e=function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("The request handler name is not specified.");if(!t.match(/^(?:\w+\:{2})?on*/))throw new Error('Invalid handler name. The correct handler name format is: "onEvent".');if("undefined"==typeof FormData)throw new Error("The browser does not support the FormData interface.");this.options=r,this.handler=t},t=[{key:"getRequestOptions",value:function(){return{method:"POST",url:this.options.url?this.options.url:window.location.href,headers:this.buildHeaders()}}},{key:"buildHeaders",value:function(){var e=this.handler,t=this.options,r={"X-Requested-With":"XMLHttpRequest","X-AJAX-HANDLER":e};t.files||(r["Content-Type"]=t.bulk?"application/json":"application/x-www-form-urlencoded"),t.flash&&(r["X-AJAX-FLASH"]=1),t.partial&&(r["X-AJAX-PARTIAL"]=t.partial);var n=this.extractPartials(t.update,t.partial);n&&(r["X-AJAX-PARTIALS"]=n);var o=this.getXSRFToken();o&&(r["X-XSRF-TOKEN"]=o);var i=this.getCSRFToken();return i&&(r["X-CSRF-TOKEN"]=i),t.headers&&t.headers.constructor==={}.constructor&&Object.assign(r,t.headers),r}},{key:"extractPartials",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=[];if(e){if("object"!==R(e))throw new Error("Invalid update value. The correct format is an object ({...})");for(var n in e)"_self"===n&&t?r.push(t):r.push(n)}return r.join("&")}},{key:"getCSRFToken",value:function(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}},{key:"getXSRFToken",value:function(){var e=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var n=t[r].replace(/^([\s]*)|([\s]*)$/g,"");if("XSRF-TOKEN="==n.substring(0,11)){e=decodeURIComponent(n.substring(11));break}}return e}}],r=[{key:"fetch",value:function(e,t){return new this(e,t).getRequestOptions()}}],t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return M(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,h={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,u=e,h.n=r,a}};function d(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],d=h.p,p=i[2];r>3?(o=p===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,h.v=n,h.n=i[1]):d<p&&(o=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,h.n=p,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),s=c,u=p;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(h.n=-1),d(s,u)):h.n=u:h.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=h.n<0)?u:r.call(n,h))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(M(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,M(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,M(f,"constructor",l),M(l,"constructor",u),u.displayName="GeneratorFunction",M(l,o,"GeneratorFunction"),M(f),M(f,o,"Generator"),M(f,n,function(){return this}),M(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:i,m:h}})()}function M(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}M=function(e,t,r,n){function i(t,r){M(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},M(e,t,r,n)}function J(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"loadCollection",value:(o=L().m(function e(){var t,r,n,o,i,a,s,u=this,l=arguments;return L().w(function(e){for(;;)switch(e.n){case 0:if(i=(null!==(t=(o=l.length>0&&void 0!==l[0]?l[0]:{}).js)&&void 0!==t?t:[]).map(V).filter(function(e){return!document.querySelector('head script[src="'.concat(G(e.url),'"]'))}),a=(null!==(r=o.css)&&void 0!==r?r:[]).map(V).filter(function(e){return!document.querySelector('head link[href="'.concat(G(e.url),'"]'))}),s=(null!==(n=o.img)&&void 0!==n?n:[]).map(V),i.length||a.length||s.length){e.n=1;break}return e.a(2);case 1:return e.n=2,Promise.all([this.loadJavaScript(i),Promise.all(a.map(function(e){return u.loadStyleSheet(e)})),this.loadImages(s)]);case 2:return e.a(2)}},e,this)}),i=function(){var e=this,t=arguments;return new Promise(function(r,n){var i=o.apply(e,t);function a(e){J(i,r,n,a,s,"next",e)}function s(e){J(i,r,n,a,s,"throw",e)}a(void 0)})},function(){return i.apply(this,arguments)})},{key:"loadStyleSheet",value:function(e){var t=e.url,r=e.attributes,n=void 0===r?{}:r;return new Promise(function(e,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t;for(var i=0,a=Object.entries(n);i<a.length;i++){var s=U(a[i],2),u=s[0],l=s[1];!0===l?o.setAttribute(u,""):!1!==l&&null!=l&&o.setAttribute(u,l)}o.onload=function(){return e(o)},o.onerror=function(){return r(new Error("Failed to load CSS: ".concat(t)))},document.head.appendChild(o)})}},{key:"loadJavaScript",value:function(e){return e.reduce(function(e,t){var r=t.url,n=t.attributes,o=void 0===n?{}:n;return e.then(function(){return new Promise(function(e,t){var n=document.createElement("script");o.type?n.type=o.type:n.type="text/javascript",n.src=r;for(var i=0,a=Object.entries(o);i<a.length;i++){var s=U(a[i],2),u=s[0],l=s[1];"type"!==u&&(!0===l?n.setAttribute(u,""):!1!==l&&null!=l&&n.setAttribute(u,l))}n.onload=function(){return e(n)},n.onerror=function(){return t(new Error("Failed to load JS: ".concat(r)))},document.head.appendChild(n)})})},Promise.resolve())}},{key:"loadImages",value:function(e){return e.length?Promise.all(e.map(function(e){return new Promise(function(t,r){var n=e.url,o=new Image;o.onload=function(){return t(n)},o.onerror=function(){return r(new Error("Failed to load image: ".concat(n)))},o.src=n})})):Promise.resolve()}}],n=[{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=(new e).loadCollection(t);return"function"==typeof r&&n.then(function(){return r()}),n}}],r&&$(t.prototype,r),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n,o,i}();function V(e){return"string"==typeof e?{url:e}:e}function G(e){return String(e).replace(/"/g,'\\"')}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function K(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}var z="replace",Q="prepend",Z="append",Y="innerHTML",ee=function(){return e=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n,this.envelope=t,this.partialMap=r,this.afterUpdateCallback=null},(t=[{key:"apply",value:function(){this.applyPartialUpdates(),this.applyDomUpdates()}},{key:"afterUpdate",value:function(e){this.afterUpdateCallback=e}},{key:"applyPartialUpdates",value:function(){var e=this;this.envelope.getPartials().forEach(function(t){var r=e.partialMap[t.name],n=[];e.partialMap._self&&t.name==e.options.partial&&e.options.partialEl?(r=e.partialMap._self,n=[e.options.partialEl]):r&&(n=te(r,'[data-ajax-partial="'+t.name+'"]')),n.forEach(function(n){e.patchDom(n,t.html,function(e,t){if("string"==typeof e){if("!"===e.charAt(0))return z;if("@"===e.charAt(0))return Z;if("^"===e.charAt(0))return Q}return void 0!==t.dataset.ajaxUpdateMode?t.dataset.ajaxUpdateMode:Y}(r,n))})})}},{key:"applyDomUpdates",value:function(){var e=this;this.envelope.getDomPatches().forEach(function(t){document.querySelectorAll(t.selector).forEach(function(r){e.patchDom(r,t.html,t.swap)})})}},{key:"patchDom",value:function(e,t,r){var n,o=e.parentNode;switch(r){case"append":case"beforeend":e.insertAdjacentHTML("beforeend",t),re(e,t);break;case"after":case"afterend":e.insertAdjacentHTML("afterend",t),re(e,t);break;case"before":case"beforebegin":e.insertAdjacentHTML("beforebegin",t),re(e,t);break;case"prepend":case"afterbegin":e.insertAdjacentHTML("afterbegin",t),re(e,t);break;case"replace":e.replaceWith(t),re(o,t);break;case"outerHTML":e.outerHTML=t,re(o,t);break;default:e.innerHTML=t,n=e,Array.from(n.querySelectorAll("script")).forEach(function(e){var t=document.createElement("script");Array.from(e.attributes).forEach(function(e){return t.setAttribute(e.name,e.value)}),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)})}this.afterUpdateCallback&&this.afterUpdateCallback(e)}}])&&X(e.prototype,t),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function te(e,t){return!0===e?document.querySelectorAll(t):"string"!=typeof e?[e]:-1===["#",".","@","^","!","="].indexOf(e.charAt(0))?[]:(-1!==["@","^","!","="].indexOf(e.charAt(0))&&(e=e.substring(1)),e||(e=t),document.querySelectorAll(e))}function re(e,t){var r=document.createElement("div");r.innerHTML=t,Array.from(r.querySelectorAll("script")).forEach(function(t){var r=document.createElement("script");Array.from(t.attributes).forEach(function(e){return r.setAttribute(e.name,e.value)}),r.appendChild(document.createTextNode(t.innerHTML)),e.appendChild(r),e.removeChild(r)})}var ne=null;function oe(){var e,t;return null!==(e=null===(t=ne)||void 0===t?void 0:t.isEnabled())&&void 0!==e&&e}function ie(e,t){return!!ne&&(ne.visit(e,t),!0)}function ae(){var e,t,r=oe()?(null!==(e=null===(t=ne)||void 0===t?void 0:t.controller)&&void 0!==e?e:null).getLastVisitUrl():function(){if(!document.referrer)return null;try{var e=new URL(document.referrer);if(e.origin!==location.origin)return null;var t=localStorage.getItem("ocPushStateReferrer");return t&&0===t.indexOf(e.pathname)?t:document.referrer}catch(e){}}();return!r||function(e){var t=new URL(e,window.location.origin),r=new URL(window.location.href);return t.origin===r.origin&&t.pathname===r.pathname}(r)?null:r}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return ue(Promise.resolve().then(function(){return e.apply(t,n)}))}}function ue(e){return Object.assign(e,{done:function(t){return e.then(t),this},fail:function(t){return e.catch(t),this},always:function(t){return e.finally(t),this}})}function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(le(e)+" is not iterable")}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach(function(t){de(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function de(e,t,r){return(t=Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=we(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ye(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return ve(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,h={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,u=e,h.n=r,a}};function d(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],d=h.p,p=i[2];r>3?(o=p===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,h.v=n,h.n=i[1]):d<p&&(o=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,h.n=p,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),s=c,u=p;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(h.n=-1),d(s,u)):h.n=u:h.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=h.n<0)?u:r.call(n,h))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ve(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ve(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ve(f,"constructor",l),ve(l,"constructor",u),u.displayName="GeneratorFunction",ve(l,o,"GeneratorFunction"),ve(f),ve(f,o,"Generator"),ve(f,n,function(){return this}),ve(f,"toString",function(){return"[object Generator]"}),(ye=function(){return{w:i,m:h}})()}function ve(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ve=function(e,t,r,n){function i(t,r){ve(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},ve(e,t,r,n)}function me(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ge(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){me(i,n,o,a,s,"next",e)}function s(e){me(i,n,o,a,s,"throw",e)}a(void 0)})}}function be(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return ke(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Se(n.key),n)}}function Se(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}var Ae=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t.el,this.delegate=t,this.context=r,this.options=n,this.context.start=this.start.bind(this),this.context.success=se(this.success,this),this.context.error=se(this.error,this),this.context.complete=se(this.complete,this),this.context.cancel=this.cancel.bind(this)},t=[{key:"invoke",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.options[e]?this.options[e].apply(this.context,t):this[e]?this[e].apply(this,be(t)):void 0}},{key:"invokeFunc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.options[e])return this.options[e](this.el,this.context,t)}},{key:"start",value:function(e){this.invoke("markAsUpdating",[!0]),this.delegate.options.message&&this.invoke("handleProgressMessage",[this.delegate.options.message,!1])}},{key:"success",value:(u=ge(ye().m(function e(t,r,n){var o;return ye().w(function(e){for(;;)switch(e.n){case 0:if(!1!==this.invoke("beforeUpdate",[t,r,n])){e.n=1;break}return e.a(2);case 1:if(!1!==this.invokeFunc("beforeUpdateFunc",t)){e.n=2;break}return e.a(2);case 2:if(this.delegate.applicationAllowsUpdate(t,r,n)){e.n=3;break}return e.a(2);case 3:if(!(t instanceof Blob)){e.n=4;break}return this.invoke("handleFileDownload",[t,n]),this.delegate.notifyApplicationRequestSuccess(t,r,n),this.invokeFunc("successFunc",t),e.a(2);case 4:if(null!==(o=t.$env)&&void 0!==o&&o.isFatal()){e.n=6;break}return e.n=5,this.invoke("handleUpdateOperations",[t,r,n]);case 5:return e.n=6,this.invoke("handleUpdateResponse",[t,r,n]);case 6:this.delegate.notifyApplicationRequestSuccess(t,r,n),this.invokeFunc("successFunc",t);case 7:return e.a(2)}},e,this)})),function(e,t,r){return u.apply(this,arguments)})},{key:"error",value:(s=ge(ye().m(function e(t,r,n){var o,i,a;return ye().w(function(e){for(;;)switch(e.n){case 0:if(a=null===(o=t.$env)||void 0===o?void 0:o.getMessage(),void 0===window.jaxUnloading||!window.jaxUnloading){e.n=1;break}return e.a(2);case 1:if(this.delegate.toggleRedirect(!1),null!==(i=t.$env)&&void 0!==i&&i.isFatal()){e.n=4;break}return e.n=2,this.invoke("handleUpdateOperations",[t,r,n]);case 2:return e.n=3,this.invoke("handleUpdateResponse",[t,r,n]);case 3:e.n=5;break;case 4:t.constructor==={}.constructor?!a&&t.message?a=t.message:(a="Something went wrong! Check the browser console.",console.warn(t)):a=t;case 5:if(this.el!==document&&this.el.setAttribute("data-error-message",a),this.delegate.applicationAllowsError(t,r,n)){e.n=6;break}return e.a(2);case 6:if(!1!==this.invokeFunc("errorFunc",t)){e.n=7;break}return e.a(2);case 7:this.invoke("handleErrorMessage",[a]);case 8:return e.a(2)}},e,this)})),function(e,t,r){return s.apply(this,arguments)})},{key:"complete",value:(a=ge(ye().m(function e(t,r,n){return ye().w(function(e){for(;;)switch(e.n){case 0:this.delegate.notifyApplicationRequestComplete(t,r,n),this.invokeFunc("completeFunc",t),this.invoke("markAsUpdating",[!1]),this.delegate.options.message&&this.invoke("handleProgressMessage",[null,!0]);case 1:return e.a(2)}},e,this)})),function(e,t,r){return a.apply(this,arguments)})},{key:"cancel",value:function(){this.invokeFunc("cancelFunc"),this.delegate.notifyApplicationRequestCancel()}},{key:"handleConfirmMessage",value:function(e){var t,r,n=this;if(new Promise(function(e,n){t=e,r=n}).then(function(){n.delegate.sendInternal()}).catch(function(){n.invoke("cancel",[])}),this.delegate.notifyApplicationConfirmMessage(e,{resolve:t,reject:r}).defaultPrevented)return!1;if(e){var o=confirm(e);return o||this.invoke("cancel",[]),o}}},{key:"handleProgressMessage",value:function(e,t){}},{key:"handleFlashMessage",value:function(e,t){}},{key:"handleErrorMessage",value:function(e){this.delegate.notifyApplicationErrorMessage(e).defaultPrevented||e&&alert(e)}},{key:"handleValidationMessage",value:function(e,t){if(this.delegate.notifyApplicationBeforeValidate(e,t),this.delegate.formEl){var r=!0;for(var n in t){var o,i=[];o=n.replace(/\.(\w+)/g,"[$1]"),i.push('[name="'+o+'"]:not([disabled])'),i.push('[name="'+o+'[]"]:not([disabled])'),o=("."+n).replace(/\.(\w+)/g,"[$1]"),i.push('[name$="'+o+'"]:not([disabled])'),i.push('[name$="'+o+'[]"]:not([disabled])');var a=n.replace(/\.[0-9]+$/g,"");n!==a&&(o=a.replace(/\.(\w+)/g,"[$1]"),i.push('[name="'+o+'[]"]:not([disabled])'),o=("."+a).replace(/\.(\w+)/g,"[$1]"),i.push('[name$="'+o+'[]"]:not([disabled])'));var s=this.delegate.formEl.querySelector(i.join(", "));if(s){var u=this.delegate.notifyApplicationFieldInvalid(s,n,t[n],r);r&&(u.defaultPrevented||s.focus(),r=!1)}}}}},{key:"handleBrowserEvents",value:(i=ge(ye().m(function e(){var t,r,n,o,i,a,s=this,u=arguments;return ye().w(function(e){for(;;)switch(e.p=e.n){case 0:if((t=u.length>0&&void 0!==u[0]?u[0]:[]).length){e.n=1;break}return e.a(2,!1);case 1:r=!1,n=pe(t),e.p=2,i=ye().m(function e(){var t,n;return ye().w(function(e){for(;;)switch(e.n){case 0:if(!0!==(null==(t=o.value)?void 0:t.async)){e.n=2;break}return e.n=1,new Promise(function(e,n){var o=!1,i=s.delegate.notifyApplicationCustomEvent(t.event,he(he({},t.detail||{}),{},{context:s.context,promise:{resolve:function(t){o||(o=!0,e(t))},reject:function(e){o||(o=!0,n(e))}}}));null!=i&&i.defaultPrevented&&(r=!0)});case 1:e.n=3;break;case 2:null!=(n=s.delegate.notifyApplicationCustomEvent(t.event,he(he({},t.detail||{}),{},{context:s.context})))&&n.defaultPrevented&&(r=!0);case 3:return e.a(2)}},e)}),n.s();case 3:if((o=n.n()).done){e.n=5;break}return e.d(ce(i()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,a=e.v,n.e(a);case 7:return e.p=7,n.f(),e.f(7);case 8:return e.a(2,r)}},e,null,[[2,6,7,8]])})),function(){return i.apply(this,arguments)})},{key:"handleRedirectResponse",value:function(e){this.delegate.notifyApplicationBeforeRedirect().defaultPrevented||(this.options.browserRedirectBack&&(e=ae()||e),oe()?ie(e):location.assign(e))}},{key:"handleReloadResponse",value:function(){location.reload()}},{key:"markAsUpdating",value:function(e){var t=this.options.update||{};for(var r in t){var n=t[r],o=[];t._self&&r==this.options.partial&&this.delegate.partialEl?(n=t._self,o=[this.delegate.partialEl]):o=te(n,'[data-ajax-partial="'+r+'"]'),o.forEach(function(t){e?t.setAttribute("data-ajax-updating",""):t.removeAttribute("data-ajax-updating")})}}},{key:"handleUpdateResponse",value:(o=ge(ye().m(function e(t,r,n){var o,i,a=this;return ye().w(function(e){for(;;)switch(e.n){case 0:if(t.$env){e.n=1;break}return e.a(2);case 1:o=this.options.update||{},(i=new ee(t.$env,o,{partial:this.options.partial,partialEl:this.delegate.partialEl})).afterUpdate(function(e){a.delegate.notifyApplicationAjaxUpdate(e,t,r,n)}),i.apply(),setTimeout(function(){a.delegate.notifyApplicationUpdateComplete(t,r,n),a.invoke("afterUpdate",[t,r,n]),a.invokeFunc("afterUpdateFunc",t)},0);case 2:return e.a(2)}},e,this)})),function(e,t,r){return o.apply(this,arguments)})},{key:"handleUpdateOperations",value:(n=ge(ye().m(function e(t,r,n){var o,i,a,s,u,l,c,f,h,d,p,y,v,m,g,b;return ye().w(function(e){for(;;)switch(e.n){case 0:if(c=this.delegate.options.flash?null===(o=t.$env)||void 0===o?void 0:o.getFlash():null){f=pe(c);try{for(f.s();!(h=f.n()).done;)d=h.value,this.invoke("handleFlashMessage",[d.text,d.level])}catch(e){f.e(e)}finally{f.f()}}if(p=null===(i=t.$env)||void 0===i?void 0:i.getBrowserEvents(),!(b=p)){e.n=2;break}return e.n=1,this.invoke("handleBrowserEvents",[p]);case 1:b=e.v;case 2:if(!b){e.n=3;break}return e.a(2);case 3:if((y=null===(a=t.$env)||void 0===a?void 0:a.getRedirectUrl())&&this.delegate.toggleRedirect(y),this.delegate.isRedirect&&this.invoke("handleRedirectResponse",[this.delegate.options.redirect]),null!==(s=t.$env)&&void 0!==s&&s.getReload()&&this.invoke("handleReloadResponse"),(v=null===(u=t.$env)||void 0===u?void 0:u.getInvalid())&&this.invoke("handleValidationMessage",[null===(m=t.$env)||void 0===m?void 0:m.getMessage(),v]),!(g=null===(l=t.$env)||void 0===l?void 0:l.getAssets())){e.n=4;break}return e.n=4,H.load(g);case 4:return e.a(2)}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"handleFileDownload",value:function(e,t){if(this.options.browserTarget)window.open(window.URL.createObjectURL(e),this.options.browserTarget);else{var r=function(e){var t=e.getResponseHeader("Content-Disposition");if(!t)return null;for(var r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g,n=null,o=null;null!==(o=r.exec(t));)n=o;return null!==n&&n[1]?null===/filename[^;*=\n]*\*=[^']*''/.exec(n[0])?n[1].replace(/['"]/g,""):decodeURIComponent(n[1].substring(n[1].indexOf("''")+2)):null}(t);if(r){var n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=r,n.target="_blank",n.click(),window.URL.revokeObjectURL(n.href)}}}},{key:"applyQueryToUrl",value:function(e){for(var t=new URLSearchParams(window.location.search),r=function(){var r=o[n],i=e[r];Array.isArray(i)?(t.delete(r),t.delete("".concat(r,"[]")),i.forEach(function(e){return t.append("".concat(r,"[]"),e)})):null===i?(t.delete(r),t.delete("".concat(r,"[]"))):t.set(r,i)},n=0,o=Object.keys(e);n<o.length;n++)r();var i=window.location.pathname,a=t.toString();a&&(i+="?"+a.replaceAll("%5B%5D=","[]=")),oe()?ie(i,{action:"swap",scroll:!1}):(history.replaceState(null,"",i),localStorage.setItem("ocPushStateReferrer",i))}}],t&&je(e.prototype,t),r&&je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o,i,a,s,u}();function Ee(e){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ee(e)}function xe(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Pe(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ee(t)?t:t+""}var qe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"assignToObj",value:function(t,r,n){(new e).assignObjectInternal(t,r,n)}},{key:"serializeAsJSON",value:function(t){return"string"==typeof t&&(t=document.querySelector(t)),(new e).parseContainer(t)}}],(r=[{key:"parseContainer",value:function(e){var t=this,r={};return e.querySelectorAll("input, textarea, select").forEach(function(e){if(!(!e.name||e.disabled||["file","reset","submit","button"].indexOf(e.type)>-1)&&(!(["checkbox","radio"].indexOf(e.type)>-1)||e.checked)){if("select-multiple"===e.type){var n=[];return Array.from(e.options).forEach(function(t){t.selected&&n.push({name:e.name,value:t.value})}),void t.assignObjectInternal(r,e.name,n)}t.assignObjectInternal(r,e.name,e.value)}}),r}},{key:"assignObjectInternal",value:function(e,t,r){this.assignObjectNested(e,this.nameToArray(t),r,t.endsWith("[]"))}},{key:"assignObjectNested",value:function(e,t,r,n){var o=e,i=t.length-1;t.forEach(function(e,t){var a;n&&t===i?(Array.isArray(o[e])||(o[e]=[]),Array.isArray(r)?(a=o[e]).push.apply(a,xe(r)):o[e].push(r)):(void 0!==o[e]&&o[e].constructor==={}.constructor||(o[e]={}),t===i&&(o[e]=r),o=o[e])})}},{key:"nameToArray",value:function(e){for(var t,r=/([^\]\[]+)/g,n=[];t=r.exec(e);)n.push(t[0]);return n}}])&&Te(t.prototype,r),n&&Te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function Fe(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}var De=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userData=t||{},this.targetEl=r,this.formEl=n},(t=[{key:"getRequestData",value:function(){var e;return e=this.formEl?new FormData(this.formEl):new FormData,this.appendSingleInputElement(e),e}},{key:"getAsFormData",value:function(){return this.appendJsonToFormData(this.getRequestData(),this.userData)}},{key:"getAsQueryString",value:function(){return this.convertFormDataToQuery(this.getAsFormData())}},{key:"getAsJsonData",value:function(){return JSON.stringify(this.convertFormDataToJson(this.getAsFormData()))}},{key:"appendSingleInputElement",value:function(e){if(!this.formEl&&this.targetEl&&(t=this.targetEl,["input","select","textarea"].includes((t.tagName||"").toLowerCase()))){var t,r=this.targetEl.name;r&&void 0===this.userData[r]&&("file"===this.targetEl.type?this.targetEl.files.forEach(function(t){e.append(r,t)}):e.append(r,this.targetEl.value))}}},{key:"appendJsonToFormData",value:function(e,t,r){var n=this;for(var o in t){var i=o;r&&(i=r+"["+o+"]");var a=t[o];a&&a.constructor==={}.constructor?this.appendJsonToFormData(e,a,i):a&&a.constructor===[].constructor?a.forEach(function(t,r){t.constructor==={}.constructor||t.constructor===[].constructor?n.appendJsonToFormData(e,t,i+"["+r+"]"):e.append(i+"[]",n.castJsonToFormData(t))}):e.append(i,this.castJsonToFormData(a))}return e}},{key:"convertFormDataToQuery",value:function(e){var t=this.formDataToArray(e);return Object.keys(t).map(function(e){return e.endsWith("[]")?t[e].map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}},{key:"convertFormDataToJson",value:function(e){var t=this.formDataToArray(e),r={};for(var n in t)qe.assignToObj(r,n,t[n]);return r}},{key:"formDataToArray",value:function(e){return Object.fromEntries(Array.from(e.keys()).map(function(t){return[t,t.endsWith("[]")?e.getAll(t):e.getAll(t).pop()]}))}},{key:"castJsonToFormData",value:function(e){return null==e?"":!0===e?"1":!1===e?"0":e}}])&&Re(e.prototype,t),r&&Re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Me(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Je(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,h={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,u=e,h.n=r,a}};function d(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],d=h.p,p=i[2];r>3?(o=p===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,h.v=n,h.n=i[1]):d<p&&(o=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,h.n=p,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),s=c,u=p;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(h.n=-1),d(s,u)):h.n=u:h.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=h.n<0)?u:r.call(n,h))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Je(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Je(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Je(f,"constructor",l),Je(l,"constructor",u),u.displayName="GeneratorFunction",Je(l,o,"GeneratorFunction"),Je(f),Je(f,o,"Generator"),Je(f,n,function(){return this}),Je(f,"toString",function(){return"[object Generator]"}),(Me=function(){return{w:i,m:h}})()}function Je(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Je=function(e,t,r,n){function i(t,r){Je(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},Je(e,t,r,n)}function $e(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _e(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){$e(i,n,o,a,s,"next",e)}function s(e){$e(i,n,o,a,s,"throw",e)}a(void 0)})}}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function Ve(e){var t=function(e,t){if("object"!=Be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Be(t)?t:t+""}var Ge,We=0,Xe=-1,Ke=-2,ze=-3,Qe=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.failed=!1,this.progress=0,this.sent=!1,this.aborted=!1,this.timedOut=!1,this.delegate=t,this.url=r,this.options=n,this.headers=n.headers||{},this.method=n.method||"GET",this.data=n.data,this.timeout=n.timeout||0,this.controller=new AbortController,this.timeoutId=null,this.xhr=this.createXhrWrapper()},t=[{key:"send",value:function(){var e=this;this.sent||(this.sent=!0,this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.delegate.requestStarted(),this.timeout>0&&(this.timeoutId=setTimeout(function(){e.timedOut=!0,e.controller.abort()},1e3*this.timeout)),this.performFetch())}},{key:"performFetch",value:(o=_e(Me().m(function e(){var t,r;return Me().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch(this.url,{method:this.method,headers:this.headers,body:this.data||null,signal:this.controller.signal});case 1:return t=e.v,this.clearTimeout(),this.updateXhrWrapper(t),e.n=2,this.handleResponse(t);case 2:e.n=4;break;case 3:e.p=3,r=e.v,this.clearTimeout(),"AbortError"===r.name?this.timedOut?this.handleTimeout():this.handleAbort():this.handleNetworkError();case 4:return e.a(2)}},e,this,[[0,3]])})),function(){return o.apply(this,arguments)})},{key:"handleResponse",value:(n=_e(Me().m(function e(t){var r,n,o;return Me().w(function(e){for(;;)switch(e.n){case 0:if(r=t.headers.get("Content-Type"),n=t.headers.get("Content-Disposition")||"",!this.options.htmlOnly||Ze(r)){e.n=1;break}return this.failed=!0,this.notifyApplicationAfterRequestEnd(),this.delegate.requestFailedWithStatusCode(Ke),this.destroy(),e.a(2);case 1:if(!n.startsWith("attachment")&&!n.startsWith("inline")){e.n=3;break}return e.n=2,t.blob();case 2:o=e.v,e.n=7;break;case 3:if(!Ye(r)){e.n=5;break}return e.n=4,t.json();case 4:o=e.v,e.n=7;break;case 5:return e.n=6,t.text();case 6:o=e.v;case 7:t.status>=200&&t.status<300?(this.notifyApplicationAfterRequestEnd(),this.delegate.requestCompletedWithResponse(o,t.status,this.getRedirectLocation(t)),this.destroy()):(this.failed=!0,this.notifyApplicationAfterRequestEnd(),this.delegate.requestFailedWithStatusCode(t.status,o),this.destroy());case 8:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getRedirectLocation",value:function(e){var t=e.headers.get("X-AJAX-LOCATION");if(t)return t;var r=this.url.match(/^(.*)#/);return(r?r[1]:this.url)!==e.url?e.url:null}},{key:"handleTimeout",value:function(){this.failed=!0,this.notifyApplicationAfterRequestEnd(),this.delegate.requestFailedWithStatusCode(Xe),this.destroy()}},{key:"handleAbort",value:function(){this.options.trackAbort?(this.failed=!0,this.notifyApplicationAfterRequestEnd(),this.delegate.requestFailedWithStatusCode(ze)):this.notifyApplicationAfterRequestEnd(),this.destroy()}},{key:"handleNetworkError",value:function(){this.failed=!0,this.notifyApplicationAfterRequestEnd(),this.delegate.requestFailedWithStatusCode(We),this.destroy()}},{key:"abort",value:function(){this.sent&&!this.aborted&&(this.aborted=!0,this.controller.abort())}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)})},{key:"notifyApplicationBeforeRequestStart",value:function(){m.dispatch("ajax:request-start",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"notifyApplicationAfterRequestEnd",value:function(){m.dispatch("ajax:request-end",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"createXhrWrapper",value:function(){return{status:0,statusText:"",responseURL:this.url,getResponseHeader:function(e){return null},getAllResponseHeaders:function(){return""}}}},{key:"updateXhrWrapper",value:function(e){this.xhr={status:e.status,statusText:e.statusText,responseURL:e.url,getResponseHeader:function(t){return e.headers.get(t)},getAllResponseHeaders:function(){return Ue(e.headers).map(function(e){var t=Ie(e,2),r=t[0],n=t[1];return"".concat(r,": ").concat(n)}).join("\r\n")}}}},{key:"setProgress",value:function(e){this.progress=e,this.delegate.requestProgressed(e)}},{key:"destroy",value:function(){this.setProgress(1),this.delegate.requestFinished()}}],t&&He(e.prototype,t),r&&He(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o}();function Ze(e){return(e||"").match(/^text\/html|^application\/xhtml\+xml/)}function Ye(e){return(e||"").includes("application/json")}function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nt(n.key),n)}}function rt(e,t,r){return(t=nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nt(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}var ot=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.hiding=!1,this.value=0,this.visible=!1,this.trickle=function(){t.setValue(t.value+Math.random()/100)}}return r=e,n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.cssClass&&this.progressElement.classList.add(e.cssClass),this.visible||(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var e=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(function(){e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}))}},{key:"setValue",value:function(e){this.value=e,this.refresh()}},{key:"installStylesheetElement",value:function(){e.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),e.stylesheetReady=!0)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}},{key:"fadeProgressElement",value:function(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*e.animationDuration)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=setInterval(this.trickle,e.animationDuration))}},{key:"stopTrickling",value:function(){clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var e=this;requestAnimationFrame(function(){e.progressElement.style.width="".concat(10+90*e.value,"%")})}},{key:"createStylesheetElement",value:function(){var t=document.createElement("style");return t.textContent=e.defaultCSS,t}},{key:"createProgressElement",value:function(){var e=document.createElement("div");return e.className="jax-progress-bar",e}}],o=[{key:"defaultCSS",get:function(){return t(Ge||(r=["\n        .jax-progress-bar {\n            position: fixed;\n            display: block;\n            top: 0;\n            left: 0;\n            height: 3px;\n            background: #0076ff;\n            z-index: 9999;\n            transition:\n                width ","ms ease-out,\n                opacity ","ms ","ms ease-in;\n            transform: translate3d(0, 0, 0);\n        }\n    "],n||(n=r.slice(0)),Ge=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))),e.animationDuration,e.animationDuration/2,e.animationDuration/2);var r,n}},{key:"progressBar",get:function(){return{show:function(){var e=it();e.setValue(0),e.show()},hide:function(){var e=it();e.setValue(100),e.hide()}}}}],n&&tt(r.prototype,n),o&&tt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function it(){return ot.instance||(ot.instance=new ot),ot.instance}rt(ot,"instance",null),rt(ot,"stylesheetReady",!1),rt(ot,"animationDuration",300);var at=["__ajax"];function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ct(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return ft(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,h={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,s=0,u=e,h.n=r,a}};function d(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],d=h.p,p=i[2];r>3?(o=p===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(s=0,h.v=n,h.n=i[1]):d<p&&(o=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,h.n=p,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,p),s=c,u=p;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(h.n=-1),d(s,u)):h.n=u:h.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=h.n<0)?u:r.call(n,h))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ft(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ft(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ft(f,"constructor",l),ft(l,"constructor",u),u.displayName="GeneratorFunction",ft(l,o,"GeneratorFunction"),ft(f),ft(f,o,"Generator"),ft(f,n,function(){return this}),ft(f,"toString",function(){return"[object Generator]"}),(ct=function(){return{w:i,m:h}})()}function ft(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}ft=function(e,t,r,n){function i(t,r){ft(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},ft(e,t,r,n)}function ht(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function dt(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ht(i,n,o,a,s,"next",e)}function s(e){ht(i,n,o,a,s,"throw",e)}a(void 0)})}}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach(function(t){vt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vt(e,t,r){return(t=gt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gt(n.key),n)}}function gt(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}function bt(e,t,r){if(!e||e.constructor!=={}.constructor||!e.__ajax)return e;e.__ajax;for(var n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,at),o={env:new C(e,t),status:t,xhr:r},i=0,a=Object.entries(o);i<a.length;i++){var s=ut(a[i],2),u=s[0],l=s[1];Object.defineProperty(n,"$".concat(u),{value:l,enumerable:!1,writable:!1,configurable:!0})}return n}const wt=function(){function t(e,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.handler=r,this.options=yt(yt({},this.constructor.DEFAULTS),n||{}),this.context={el:e,handler:r,options:this.options},this.progressBar=new ot,this.showProgressBar=function(){o.progressBar.show({cssClass:"is-ajax"})}}return r=t,n=[{key:"start",value:function(){return this.promise=function(e){e||(e=function(){});var t,r,n=!1,o=function(){},i=new Promise(function(i,a){t=i,r=a,e(function(e){n||i(e)},function(e){n||a(e)},function(e){o=e})});return i.cancel=function(){n=!0,o()},i.onCancel=function(e){return o="function"==typeof e?e:o,i},i.resolve=function(e){n||t(e)},i.reject=function(e){n||r(e)},ue(i)}(),this.applicationAllowsSetup()?(this.initOtherElements(),this.preprocessOptions(),this.actions=new Ae(this,this.context,this.options),!1===this.actions.invokeFunc("beforeSendFunc")?(this.promise.resolve(null),this.promise):this.validateClientSideForm()&&this.applicationAllowsRequest()?this.options.confirm&&!this.actions.invoke("handleConfirmMessage",[this.options.confirm])?(this.promise.resolve(null),this.promise):(this.sendInternal(),this.promise):(this.promise.resolve(null),this.promise)):(this.promise.resolve(null),this.promise)}},{key:"sendInternal",value:function(){var e,t=this,r=new De(this.options.data,this.el,this.formEl);e=this.options.files?r.getAsFormData():this.options.bulk?r.getAsJsonData():r.getAsQueryString(),this.options.query&&this.actions.invoke("applyQueryToUrl",[!0!==this.options.query?this.options.query:JSON.parse(r.getAsJsonData())]);var n=B.fetch(this.handler,this.options),o=n.url,i=n.headers,a=n.method;this.request=new Qe(this,o,{method:a,headers:i,data:e,trackAbort:!0}),this.isRedirect=this.options.redirect&&this.options.redirect.length>0,this.notifyApplicationBeforeSend(),this.notifyApplicationAjaxPromise(),this.promise.onCancel(function(){t.request.abort()}).then(function(e){t.isRedirect||(t.notifyApplicationAjaxDone(e,e.$status,e.$xhr),t.notifyApplicationAjaxAlways(e,e.$status,e.$xhr),t.notifyApplicationSendComplete(e,e.$status,e.$xhr))}).catch(function(e){t.isRedirect||(t.notifyApplicationAjaxFail(e,e.$status,e.$xhr),t.notifyApplicationAjaxAlways(e,e.$status,e.$xhr),t.notifyApplicationSendComplete(e,e.$status,e.$xhr))}),this.request.send()}},{key:"toggleRedirect",value:function(e){e?(this.options.redirect=e,this.isRedirect=!0):(this.options.redirect=null,this.isRedirect=!1)}},{key:"applicationAllowsSetup",value:function(){return!this.notifyApplicationAjaxSetup().defaultPrevented}},{key:"applicationAllowsRequest",value:function(){return!this.notifyApplicationBeforeRequest().defaultPrevented}},{key:"applicationAllowsUpdate",value:function(e,t,r){return!this.notifyApplicationBeforeUpdate(e,t,r).defaultPrevented}},{key:"applicationAllowsError",value:function(e,t,r){return!this.notifyApplicationRequestError(e,t,r).defaultPrevented}},{key:"notifyApplicationAjaxSetup",value:function(){return e("ajax:setup",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxPromise",value:function(){return e("ajax:promise",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxFail",value:function(t,r,n){return e("ajax:fail",{target:this.el,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationAjaxDone",value:function(t,r,n){return e("ajax:done",{target:this.el,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationAjaxAlways",value:function(t,r,n){return e("ajax:always",{target:this.el,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationAjaxUpdate",value:function(t,r,n,o){return e("ajax:update",{target:t,detail:{context:this.context,data:r,responseCode:n,xhr:o}})}},{key:"notifyApplicationBeforeRedirect",value:function(){return e("ajax:before-redirect",{target:this.el})}},{key:"notifyApplicationBeforeRequest",value:function(){return e("ajax:before-request",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeUpdate",value:function(t,r,n){return e("ajax:before-update",{target:this.triggerEl,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationRequestSuccess",value:function(t,r,n){return e("ajax:request-success",{target:this.triggerEl,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationRequestError",value:function(t,r,n){return e("ajax:request-error",{target:this.triggerEl,detail:{context:this.context,message:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationRequestComplete",value:function(t,r,n){return e("ajax:request-complete",{target:this.triggerEl,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationRequestCancel",value:function(){return e("ajax:request-cancel",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeValidate",value:function(t,r){return e("ajax:before-validate",{target:this.triggerEl,detail:{context:this.context,message:t,fields:r}})}},{key:"notifyApplicationBeforeReplace",value:function(t){return e("ajax:before-replace",{target:t})}},{key:"notifyApplicationBeforeSend",value:function(){return e("ajax:before-send",{target:window,detail:{context:this.context}})}},{key:"notifyApplicationUpdateComplete",value:function(t,r,n){return e("ajax:update-complete",{target:window,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationSendComplete",value:function(t,r,n){return e("ajax:send-complete",{target:window,detail:{context:this.context,data:t,responseCode:r,xhr:n}})}},{key:"notifyApplicationFieldInvalid",value:function(t,r,n,o){return e("ajax:invalid-field",{target:window,detail:{element:t,fieldName:r,errorMsg:n,isFirst:o}})}},{key:"notifyApplicationConfirmMessage",value:function(t,r){return e("ajax:confirm-message",{target:window,detail:{message:t,promise:r}})}},{key:"notifyApplicationErrorMessage",value:function(t){return e("ajax:error-message",{target:window,detail:{message:t}})}},{key:"notifyApplicationCustomEvent",value:function(t,r){return e(t,{target:this.el,detail:r})}},{key:"requestStarted",value:function(){this.markAsProgress(!0),this.toggleLoadingElement(!0),this.options.progressBar&&this.showProgressBarAfterDelay(),this.actions.invoke("start",[this.request.xhr])}},{key:"requestProgressed",value:function(e){}},{key:"requestCompletedWithResponse",value:(a=dt(ct().m(function e(t,r){var n;return ct().w(function(e){for(;;)switch(e.n){case 0:return n=bt(t,r,this.request.xhr),e.n=1,this.actions.invoke("success",[n,r,this.request.xhr]);case 1:return e.n=2,this.actions.invoke("complete",[n,r,this.request.xhr]);case 2:this.promise.resolve(n);case 3:return e.a(2)}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"requestFailedWithStatusCode",value:(i=dt(ct().m(function e(t,r){var n;return ct().w(function(e){for(;;)switch(e.n){case 0:if(n=bt(r,t,this.request.xhr),t!=ze){e.n=2;break}return e.n=1,this.actions.invoke("cancel",[]);case 1:e.n=3;break;case 2:return e.n=3,this.actions.invoke("error",[n,t,this.request.xhr]);case 3:return e.n=4,this.actions.invoke("complete",[n,t,this.request.xhr]);case 4:this.promise.reject(n);case 5:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"requestFinished",value:function(){this.markAsProgress(!1),this.toggleLoadingElement(!1),this.options.progressBar&&this.hideProgressBar()}},{key:"initOtherElements",value:function(){"string"==typeof this.options.form?this.formEl=document.querySelector(this.options.form):this.options.form?this.formEl=this.options.form:this.formEl=this.el&&this.el!==document?this.el.closest("form"):null,this.triggerEl=this.formEl||this.el!==document&&this.el.closest("[data-request-scope]")||document.body,this.partialEl=this.el&&this.el!==document?this.el.closest("[data-ajax-partial]"):null,this.loadingEl="string"==typeof this.options.loading?document.querySelector(this.options.loading):this.options.loading}},{key:"preprocessOptions",value:function(){void 0===this.options.partial&&this.partialEl&&void 0!==this.partialEl.dataset.ajaxPartial&&(this.options.partial=this.partialEl.dataset.ajaxPartial||!0)}},{key:"validateClientSideForm",value:function(){return!(this.options.browserValidate&&"function"==typeof document.createElement("input").reportValidity&&this.formEl&&!this.formEl.checkValidity()&&(this.formEl.reportValidity(),1))}},{key:"toggleLoadingElement",value:function(e){this.loadingEl&&("function"==typeof this.loadingEl.show&&"function"==typeof this.loadingEl.hide?e?this.loadingEl.show():this.loadingEl.hide():this.loadingEl.style.display=e?"block":"none")}},{key:"showProgressBarAfterDelay",value:function(){this.progressBar.setValue(0),this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.options.progressBarDelay)}},{key:"hideProgressBar",value:function(){this.progressBar.setValue(100),this.progressBar.hide(),null!=this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}},{key:"markAsProgress",value:function(e){e?(document.documentElement.setAttribute("data-ajax-progress",""),this.formEl&&this.formEl.setAttribute("data-ajax-progress",this.handler)):(document.documentElement.removeAttribute("data-ajax-progress"),this.formEl&&this.formEl.removeAttribute("data-ajax-progress"))}}],o=[{key:"DEFAULTS",get:function(){return{handler:null,update:{},files:!1,bulk:!1,browserTarget:null,browserValidate:!1,browserRedirectBack:!1,progressBarDelay:500,progressBar:null}}},{key:"send",value:function(e,r){return new t(document,e,r).start()}},{key:"sendElement",value:function(e,r,n){return"string"==typeof e&&(e=document.querySelector(e)),new t(e,r,n).start()}}],n&&mt(r.prototype,n),o&&mt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,a}();function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kt(t)?t:t+""}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"paramToObj",value:function(e,t){if(void 0===t&&(t=""),"object"===kt(t))return t;"{"!==t.charAt(0)&&(t="{"+t+"}");try{return this.parseJSON(t)}catch(t){throw new Error("Error parsing the "+e+" attribute value. "+t)}}},{key:"parseJSON",value:function(t){return JSON.parse((new e).parseString(t))}}],(r=[{key:"parseString",value:function(e){if(!(e=e.trim()).length)throw new Error("Broken JSON object.");for(var t="";e&&","===e[0];)e=e.substr(1);if('"'===e[0]||"'"===e[0]){if(e[e.length-1]!==e[0])throw new Error("Invalid string JSON object.");for(var r='"',n=1;n<e.length;n++)if("\\"===e[n])"'"===e[n+1]||(r+=e[n]),r+=e[n+1],n++;else{if(e[n]===e[0])return r+='"';'"'===e[n]?r+='\\"':r+=e[n]}throw new Error("Invalid string JSON object.")}if("true"===e||"false"===e)return e;if("null"===e)return"null";var o=parseFloat(e);if(!isNaN(o))return o.toString();if("{"===e[0]){var i="needKey";for(t="{",n=1;n<e.length;n++)if(!this.isBlankChar(e[n]))if("needKey"!==i||'"'!==e[n]&&"'"!==e[n]){if("needKey"===i&&this.canBeKeyHead(e[n])){var a;t+='"',t+=a=this.parseKey(e,n),t+='"',n+=a.length-1,i="afterKey"}else if("afterKey"===i&&":"===e[n])t+=":",i=":";else if(":"===i)n=n+(r=this.getBody(e,n)).originLength-1,t+=this.parseString(r.body),i="afterBody";else if("afterBody"===i||"needKey"===i){for(var s=n;","===e[s]||this.isBlankChar(e[s]);)s++;if("}"===e[s]&&s===e.length-1){for(;","===t[t.length-1];)t=t.substr(0,t.length-1);return t+="}"}s!==n&&"{"!==t&&(t+=",",i="needKey",n=s-1)}}else t+='"'+(a=this.parseKey(e,n+1,e[n]))+'"',n+=a.length,n+=1,i="afterKey";throw new Error("Broken JSON object near "+t)}if("["===e[0]){for(t="[",i="needBody",n=1;n<e.length;n++)if(" "!==e[n]&&"\n"!==e[n]&&"\t"!==e[n])if("needBody"===i){if(","===e[n]){t+="null,";continue}if("]"===e[n]&&n===e.length-1)return","===t[t.length-1]&&(t=t.substr(0,t.length-1)),t+="]";n=n+(r=this.getBody(e,n)).originLength-1,t+=this.parseString(r.body),i="afterBody"}else if("afterBody"===i)if(","===e[n])for(t+=",",i="needBody";","===e[n+1]||this.isBlankChar(e[n+1]);)","===e[n+1]&&(t+="null,"),n++;else if("]"===e[n]&&n===e.length-1)return t+="]";throw new Error("Broken JSON array near "+t)}}},{key:"parseKey",value:function(e,t,r){for(var n="",o=t;o<e.length;o++){if(r&&r===e[o])return n;if(!r&&(" "===e[o]||":"===e[o]))return n;n+=e[o],"\\"===e[o]&&o+1<e.length&&(n+=e[o+1],o++)}throw new Error("Broken JSON syntax near "+n)}},{key:"getBody",value:function(e,t){if('"'===e[t]||"'"===e[t]){for(var r=e[t],n=t+1;n<e.length;n++)if("\\"===e[n])r+=e[n],n+1<e.length&&(r+=e[n+1]),n++;else{if(e[n]===e[t])return{originLength:(r+=e[t]).length,body:r};r+=e[n]}throw new Error("Broken JSON string body near "+r)}if("t"===e[t]){if(e.indexOf("true",t)===t)return{originLength:4,body:"true"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("f"===e[t]){if(e.indexOf("f",t)===t)return{originLength:5,body:"false"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("n"===e[t]){if(e.indexOf("null",t)===t)return{originLength:4,body:"null"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("-"===e[t]||"+"===e[t]||"."===e[t]||e[t]>="0"&&e[t]<="9"){for(r="",n=t;n<e.length;n++){if(!("-"===e[n]||"+"===e[n]||"."===e[n]||e[n]>="0"&&e[n]<="9"))return{originLength:r.length,body:r};r+=e[n]}throw new Error("Broken JSON number body near "+r)}if("{"===e[t]||"["===e[t]){var o=[e[t]];for(r=e[t],n=t+1;n<e.length;n++){if(r+=e[n],"\\"===e[n])n+1<e.length&&(r+=e[n+1]),n++;else if('"'===e[n])'"'===o[o.length-1]?o.pop():"'"!==o[o.length-1]&&o.push(e[n]);else if("'"===e[n])"'"===o[o.length-1]?o.pop():'"'!==o[o.length-1]&&o.push(e[n]);else if('"'!==o[o.length-1]&&"'"!==o[o.length-1])if("{"===e[n])o.push("{");else if("}"===e[n]){if("{"!==o[o.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+r);o.pop()}else if("["===e[n])o.push("[");else if("]"===e[n]){if("["!==o[o.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+r);o.pop()}if(!o.length)return{originLength:n-t,body:r}}throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+r)}throw new Error("Broken JSON body near "+e.substr(t-5>=0?t-5:0,50))}},{key:"canBeKeyHead",value:function(e){return"\\"!==e[0]&&(e[0]>="a"&&e[0]<="z"||e[0]>="A"&&e[0]<="Z"||"_"===e[0]||e[0]>="0"&&e[0]<="9"||"$"===e[0]||e.charCodeAt(0)>255)}},{key:"isBlankChar",value:function(e){return" "===e||"\n"===e||"\t"===e}}])&&jt(t.prototype,r),n&&jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach(function(t){Tt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Tt(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qt(n.key),n)}}function qt(e){var t=function(e,t){if("object"!=Et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Et(t)?t:t+""}var Ct=function(){function e(t,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n||{},this.ogElement=t,this.element=this.findElement(t),this.element?(this.assignAsEval("beforeSendFunc","requestBeforeSend"),this.assignAsEval("beforeUpdateFunc","requestBeforeUpdate"),this.assignAsEval("afterUpdateFunc","requestAfterUpdate"),this.assignAsEval("successFunc","requestSuccess"),this.assignAsEval("errorFunc","requestError"),this.assignAsEval("cancelFunc","requestCancel"),this.assignAsEval("completeFunc","requestComplete"),this.assignAsData("progressBar","requestProgressBar"),this.assignAsData("message","requestMessage"),this.assignAsData("confirm","requestConfirm"),this.assignAsData("redirect","requestRedirect"),this.assignAsData("loading","requestLoading"),this.assignAsData("form","requestForm"),this.assignAsData("url","requestUrl"),this.assignAsData("bulk","requestBulk",{emptyAsTrue:!0}),this.assignAsData("files","requestFiles",{emptyAsTrue:!0}),this.assignAsData("flash","requestFlash",{emptyAsTrue:!0}),this.assignAsData("update","requestUpdate",{parseJson:!0}),this.assignAsData("query","requestQuery",{emptyAsTrue:!0,parseJson:!0}),this.assignAsData("browserTarget","browserTarget"),this.assignAsData("browserValidate","browserValidate",{emptyAsTrue:!0}),this.assignAsData("browserRedirectBack","browserRedirectBack",{emptyAsTrue:!0}),this.assignAsMetaData("update","ajaxRequestUpdate",{parseJson:!0,mergeValue:!0}),this.assignRequestData(),r||(r=this.getHandlerName()),wt.sendElement(this.element,this.normalizeHandler(r),this.options)):wt.send(this.normalizeHandler(r),this.options)}return t=e,r=[{key:"findElement",value:function(e){if(!e||e===document)return null;if(e.matches("[data-request]"))return e;var t=e.closest("[data-request]");return t||e}},{key:"getHandlerName",value:function(){return this.element.dataset.dataRequest?this.element.dataset.dataRequest:this.element.getAttribute("data-request")}},{key:"normalizeHandler",value:function(e){return e&&!/^(?:\w+\:{2})?on[A-Z]{1}[\w+]*$/.test(e)?(void 0===this.options.url&&(this.options.url=e),"onAjax"):e}},{key:"assignAsEval",value:function(e,t){var r;void 0===this.options[e]&&(r=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+Rt(t)))&&(this.options[e]=function(e,t,n){return new Function("context","data",r).apply(e,[t,n])})}},{key:"assignAsData",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.parseJson,i=void 0!==o&&o,a=n.emptyAsTrue,s=void 0!==a&&a;void 0===this.options[e]&&null!==(r=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+Rt(t)))&&(r=this.castAttrToOption(r,s),i&&"string"==typeof r&&(r=At.paramToObj("data-"+Rt(t),r)),this.options[e]=r)}},{key:"assignAsMetaData",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.mergeValue,o=void 0===n||n,i=r.parseJson,a=void 0!==i&&i,s=r.emptyAsTrue,u=void 0!==s&&s,l=document.documentElement.querySelector('head meta[name="'+Rt(t)+'"]');if(l){var c=l.getAttribute("content");c=a?At.paramToObj(Rt(t),c):this.castAttrToOption(c,u),this.options[e]=o?Ot(Ot({},this.options[e]||{}),c):c}}},{key:"castAttrToOption",value:function(e,t){return!(!t||""!==e)||"true"===e||"1"===e||"false"!==e&&"0"!==e&&e}},{key:"assignRequestData",value:function(){var e={};this.options.data&&Object.assign(e,this.options.data);var t=this.ogElement.getAttribute("data-request-data");t&&Object.assign(e,At.paramToObj("data-request-data",t)),function(e,t){var r=[];if(!e.parentNode)return r;for(var n=e.parentNode.closest(t);n;)r.push(n),n=n.parentNode.closest(t);return r}(this.ogElement,"[data-request-data]").reverse().forEach(function(t){Object.assign(e,At.paramToObj("data-request-data",t.getAttribute("data-request-data")))}),this.options.data=e}}],n=[{key:"fromElement",value:function(t,r,n){return"string"==typeof t&&(t=document.querySelector(t)),new e(t,r,n)}}],r&&Pt(t.prototype,r),n&&Pt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Rt(e){return e.replace(/[A-Z]/g,function(e){return"-".concat(e.toLowerCase())})}function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bt(n.key),n)}}function Bt(e){var t=function(e,t){if("object"!=Ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ft(t)?t:t+""}var It=function(){return t=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.config=this.parse(),this.timer=null,this.throttleTimer=null,this.lastValue=null,this.fired=!1,this.throttled=!1,this.lastRequest=null},(r=[{key:"parse",value:function(){var e=this.element.dataset.requestTrigger,t=this.element.dataset.requestPoll;if(!e&&void 0!==this.element.dataset.trackInput){var r=this.element.dataset.trackInput||300;e="input changed delay:".concat(r)}if(!e&&void 0!==this.element.dataset.autoSubmit){var n=this.element.dataset.autoSubmit||0;e=n>0?"load delay:".concat(n):"load"}e||(e=this.getDefaultTrigger());var o=this.parseString(e);return t&&(o.poll=this.parseTime(t)),o}},{key:"parseString",value:function(e){for(var t=e.trim().split(/\s+/),r={event:t[0]||"click",delay:0,throttle:0,once:!1,changed:!1,poll:0},n=1;n<t.length;n++){var o=t[n];"once"===o?r.once=!0:"changed"===o?r.changed=!0:o.startsWith("delay:")?r.delay=this.parseTime(o.slice(6)):o.startsWith("throttle:")&&(r.throttle=this.parseTime(o.slice(9)))}return r}},{key:"parseTime",value:function(e){return"number"==typeof e?e:(e=String(e).trim()).endsWith("ms")?parseFloat(e):e.endsWith("s")?1e3*parseFloat(e):parseInt(e,10)||0}},{key:"getDefaultTrigger",value:function(){var e,t=this.element,r=t.tagName.toLowerCase(),n=null===(e=t.getAttribute("type"))||void 0===e?void 0:e.toLowerCase();return"form"===r?"submit":"a"===r||"button"===r?"click":"select"===r||"checkbox"===n||"radio"===n||"file"===n?"change":"click"}},{key:"isConnected",value:function(){return this.element.isConnected}},{key:"bind",value:function(){var t=this.config.event;"load"===t?e("ajax:trigger",{target:this.element}):"revealed"!==t&&"intersect"!==t||this.observeVisibility()}},{key:"handleEvent",value:function(e){var t=this;if((!e||!e.defaultPrevented)&&this.isConnected()){!e||"submit"!==this.config.event&&"click"!==this.config.event||e.preventDefault();var r=this.config,n=r.delay,o=r.throttle,i=r.once,a=r.changed;i&&this.fired||a&&!this.hasChanged()||(this.timer&&(clearTimeout(this.timer),this.timer=null),o>0&&this.throttled||(n>0?this.timer=setTimeout(function(){return t.fire()},n):this.fire()))}}},{key:"hasChanged",value:function(){var e=this.element.value;return this.lastValue!==e&&(this.lastValue=e,!0)}},{key:"fire",value:function(){var e=this;this.isConnected()&&(this.lastRequest&&this.lastRequest.abort&&this.lastRequest.abort(),this.fired=!0,this.lastRequest=Ct.fromElement(this.element),this.config.throttle>0&&(this.throttled=!0,this.throttleTimer=setTimeout(function(){e.throttled=!1},this.config.throttle)))}},{key:"observeVisibility",value:function(){var t=this,r=new IntersectionObserver(function(n){n.forEach(function(n){t.isConnected()?n.isIntersecting&&(e("ajax:trigger",{target:t.element}),(t.config.once||"intersect"===t.config.event)&&r.disconnect()):r.disconnect()})},{threshold:.1});r.observe(this.element)}},{key:"startPolling",value:function(){var t=this,r=setInterval(function(){t.isConnected()?document.hidden||e("ajax:trigger",{target:t.element}):clearInterval(r)},this.config.poll)}}])&&Dt(t.prototype,r),n&&Dt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ut(e){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(e)}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mt(n.key),n)}}function Lt(e,t,r){return(t=Mt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mt(e){var t=function(e,t){if("object"!=Ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ut(t)?t:t+""}var Jt=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lt(this,"onRender",function(){t.render()}),Lt(this,"onTriggerEvent",function(e){var r=e.delegateTarget,n=t.getTrigger(r),o=n.config.event;"ajax:trigger"!==e.type?e.type===o&&n.handleEvent(e):n.handleEvent(e)}),this.started=!1,this.triggers=new WeakMap},(t=[{key:"start",value:function(){this.started||(addEventListener("beforeunload",this.documentOnBeforeUnload),m.on(document,"click","[data-request]",this.onTriggerEvent),m.on(document,"submit","[data-request]",this.onTriggerEvent),m.on(document,"change","[data-request]",this.onTriggerEvent),m.on(document,"input","[data-request]",this.onTriggerEvent),m.on(document,"ajax:trigger","[data-request]",this.onTriggerEvent),addEventListener("DOMContentLoaded",this.onRender),addEventListener("page:updated",this.onRender),addEventListener("ajax:update-complete",this.onRender),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeEventListener("beforeunload",this.documentOnBeforeUnload),m.off(document,"click","[data-request]",this.onTriggerEvent),m.off(document,"submit","[data-request]",this.onTriggerEvent),m.off(document,"change","[data-request]",this.onTriggerEvent),m.off(document,"input","[data-request]",this.onTriggerEvent),m.off(document,"ajax:trigger","[data-request]",this.onTriggerEvent),removeEventListener("DOMContentLoaded",this.onRender),removeEventListener("page:updated",this.onRender),removeEventListener("ajax:update-complete",this.onRender),this.started=!1)}},{key:"render",value:function(){m.dispatch("before-render"),m.dispatch("render"),dispatchEvent(new Event("resize")),this.bindCustomTriggers()}},{key:"bindCustomTriggers",value:function(){var e=this;document.querySelectorAll("[data-request]:not([data-trigger-bound])").forEach(function(t){var r=e.getTrigger(t),n=r.config.event;"load"!==n&&"revealed"!==n&&"intersect"!==n||(t.setAttribute("data-trigger-bound",""),r.bind()),r.config.poll>0&&(t.setAttribute("data-trigger-bound",""),r.startPolling())})}},{key:"getTrigger",value:function(e){var t=this.triggers.get(e);return t||(t=new It(e),this.triggers.set(e,t)),t}},{key:"documentOnBeforeUnload",value:function(e){window.jaxUnloading=!0}},{key:"pageReady",value:function(){var e,t,r;return null!==(e=null!==(t=null===(r=ne)||void 0===r?void 0:r.pageReady())&&void 0!==t?t:null)&&void 0!==e?e:new Promise(function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return e()}):e()})}}])&&Nt(e.prototype,t),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}());const $t={controller:Jt,parseJSON:At.parseJSON,serializeAsJSON:qe.serializeAsJSON,requestElement:Ct.fromElement,pageReady:function(){return Jt.pageReady()},start:function(){Jt.start()},stop:function(){Jt.stop()}};window.jax||(window.jax={}),Object.assign(window.jax,function(e){var t=e.AjaxFramework,r=e.AjaxRequest,n=e.AssetManager,o=e.Events,i=e.waitFor,a=e.visit,s=e.AjaxExtras,u=e.AjaxObserve,l=e.AjaxTurbo,c=e.ControlBase,f={AjaxRequest:r,AssetManager:n,ajax:r.send,AjaxFramework:t,request:t.requestElement,parseJSON:t.parseJSON,values:t.serializeAsJSON,pageReady:t.pageReady,Events:o,dispatch:o.dispatch,trigger:o.trigger,on:o.on,off:o.off,one:o.one,waitFor:i,visit:a};return s&&(f.AjaxExtras=s,f.flashMsg=s.flashMsg,f.progressBar=s.progressBar,f.attachLoader=s.attachLoader),u&&(f.AjaxObserve=u,f.registerControl=u.registerControl,f.importControl=u.importControl,f.observeControl=u.observeControl,f.fetchControl=u.fetchControl,f.fetchControls=u.fetchControls),c&&(f.ControlBase=c),l&&(ne=l,f.AjaxTurbo=l,f.useTurbo=l.isEnabled),f}({AjaxFramework:$t,AjaxRequest:wt,AssetManager:H,Events:m,waitFor:function(e,t){return new Promise(function(r,n){var o=function(){e()&&(clearInterval(i),r())},i=setInterval(o,100);o(),t&&setTimeout(function(){clearInterval(i),n()},t)})},visit:function(e){return window.location.assign(e)}})),$t.start();r(145)})()})();